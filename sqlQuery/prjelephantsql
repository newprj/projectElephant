SELECT  'DROP TABLE ' || object_name || ' CASCADE CONSTRAINTS;'
  FROM    user_objects
WHERE   object_type = 'TABLE';

DROP TABLE TBL_REVIEW CASCADE CONSTRAINTS;
DROP TABLE ATTACHFILE CASCADE CONSTRAINTS;
DROP TABLE CPAGE CASCADE CONSTRAINTS;
DROP TABLE TBL_MESSAGE CASCADE CONSTRAINTS;
DROP TABLE TBL_GROUP CASCADE CONSTRAINTS;
DROP TABLE TBL_GROUPUSER CASCADE CONSTRAINTS;
DROP TABLE QNA_TBL CASCADE CONSTRAINTS;
DROP TABLE QNA_REPLY_TBL CASCADE CONSTRAINTS;
DROP TABLE QNA_ATTACH_TBL CASCADE CONSTRAINTS;
DROP TABLE TBL_USER CASCADE CONSTRAINTS;
DROP TABLE TBL_CALENDAR CASCADE CONSTRAINTS;

commit;

-- spring database에서 모든 table을 삭제 했습니다
CREATE DATABASE spring CHARACTER SET utf8 COLLATE utf8_general_ci;

--- create , drop table and sequence

drop table tbl_user;
create table tbl_user(
    uno number,
    user_id varchar2(30),
    password varchar2(30),
    name varchar2(30),
    email varchar2(30));
drop sequence seq_uno;
create sequence seq_uno;


drop table tbl_groupuser;
create table tbl_groupuser(
    cno number,
    authorized varchar2(1) default 'N',
    user_id varchar2(30),
    group_name varchar2(30));
drop sequence seq_cno;
create sequence seq_cno;

drop table tbl_review;
-------------- 치원님 쿼리 이용
drop table board_file;   
create table board_file(
    uuid varchar2(100),
    uploadPath varchar2(200),
    fileName varchar2(100),
    fileType char(1) default '1',
    bno number);

drop table tbl_qanda;
-- -----------------희주님 쿼리 이용 
create sequence seq_qno;
drop sequence seq_qno;  

------------ 테이블 컬럼 속성 변경
drop table tbl_board;
create table tbl_board(
    bno number,
    group_name varchar2(30),
    title varchar2(200),
    content varchar2(2000),
    writer varchar2(30),
    regdate timestamp default sysdate,
    updatedate timestamp);  

create sequence seq_bno;
drop sequence seq_bno; 
alter table tbl_board add constraint pk_board primary key(bno);
alter table tbl_board add (notice char(1) default('N'));


----------- 테이블 컬럼 속성 변경 
drop table board_reply;
create table board_reply(
    rno number,
    bno number,
    reply varchar2(500),
    replyer varchar2(100),
    replydate date default sysdate,
    updatedate timestamp);    
create sequence board_rno;  
drop sequence board_rno;  
create sequence seq_rno;
drop sequence seq_rno;
    

--- 어디에 쓴건지 모르는 시퀀스
create sequence seq_cno;
drop sequence seq_cno;

select * from tbl_groupuser;
select * from tbl_board;
select * from tbl_user;
select * from tbl_group;
select * from board_file;
select * from board_reply;
select * from tbl_calendar;
select * from user_sequences;

--- 쿼리 문서 수정 /공유 시 수정한 부분 주석으로 달아주세요 
--- select, update 등 테스트를 위한 쿼리문은 공유 X

---- 12/11 컬럼 날짜를 varchar로 받던 것을 timestmap로 수정했습니다

drop table tbl_calendar;
create table tbl_calendar(
    cid number,
    title varchar2(50),
    startDate timestamp,
    endDate timestamp,
    editable varchar2(1) default 'N',
    color varchar2(50),
    description_ varchar2(500),
    location varchar2(100),
    group_ varchar2(500),
    user_ varchar2(50),
    member_ varchar2(50));
create sequence seq_cid;
drop sequence seq_cid;

-------------------------------------------------- 12/15

create table tbl_message(
    mid number,
    msg Long,
    group_name varchar2(200),
    user_id varchar2(200));

create sequence seq_mid;

-------------------
drop table tbl_group;
create table tbl_group(
    gno number primary key,
    group_name varchar2(30),
    leader varchar2(30),
    subject varchar2(30),
    description varchar2(2000),
    member_number number,
    authorized char(1) default 'N' check(authorized in('Y','N'))
);
alter table tbl_group add ( viewCnt number default 0 );
alter table tbl_group add(authorized char(1) default 'N' check(authorized in('Y','N')));
alter table tbl_group add( regdate timestamp);


select * from tbl_group;
drop sequence seq_gno;
create sequence seq_gno;


----- 어드민기능
update tbl_group set authorized = 'Y'; 
update tbl_groupuser set authorized='Y';
update tbl_group set regdate = sysdate;
commit;




